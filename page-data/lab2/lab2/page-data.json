{
    "componentChunkName": "component---src-pages-lab-2-lab-2-mdx",
    "path": "/lab2/lab2/",
    "result": {"pageContext":{"frontmatter":{"title":"Lab 2 - Leggere i dati da un DB","description":"Creare un API per leggere i dati da un database attraverso un connettore JDBC"},"relativePagePath":"/lab2/lab2.mdx","titleType":"page","MdxNode":{"id":"3073c0cf-c3db-5bf6-8d48-c35786704d72","children":[],"parent":"7449ce3f-2b80-5126-bdf7-8a87a19b99c5","internal":{"content":"---\ntitle: Lab 2 - Leggere i dati da un DB\ndescription: Creare un API per leggere i dati da un database attraverso un connettore JDBC\n---\n\n# Creazione di un'API per accesso ad un Database\n\n<PageDescription>\n\nL'obiettivo del primo laboratorio è quello di creare un flusso di integrazione che esponga i dati di un DB attraverso un API. Il laboratorio è stato già predisposto, creando una connessione ad un Database DB2 di test.\n<br></br>\n\n</PageDescription>\n\n\n1. Colleghiamoci all'ambiente di laboratorio con utenza e password\n\n![IBM Design](docs/images/Lab1/Lab1-16-33-39.png)\n  \n2. Selezioniamo la voce <strong>ace-designer</strong> per accedere al menù di creazione dei flussi di integrazione\n\n![Lab1](/docs/images/Lab1/Lab1-16-33-54.png)\n\n3. Clicchiamo sulla voce <strong>Create a flow by describing and integration</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-14-03.png)\n\n4. Cerchiamo nella barra di ricerca, i modelli di integrazione relativi al workshop, digitando il tag <strong>INPS</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-14-16.png)\n\n5. Visualizziamo la voce <strong>View matching templates</strong> per visualizzare i template e apriamo la voce <strong>Righe Estratto Conto Template</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-18-07.png)\n\n6. Clicchiamo sul pulsante <strong>+</strong> sulla destra per creare il flusso (<strong>Create from asset</strong>)\n\n![Lab1](/docs/images/Lab1/Lab1-20-18-10.png)\n\n7. <strong>Importante!</strong> Rinominiamo il flusso in alto inserendo il nome del proprio utente (Dev xx)\n\n![Lab1](/docs/images/Lab1/Lab1-20-20-03.png)\n\n8. Andiamo a visualizzare le <strong>proprietà</strong> del modello dati\n\n![Lab1](/docs/images/Lab1/Lab1-20-20-07.png)\n\n9. Clicchiamo sul tab <strong>Operations</strong>><strong>Add a custom operation</strong> per creare una nuova azione\n\n![Lab1](/docs/images/Lab1/Lab1-20-20-13.png)\n\n10. Completiamo il riquadro che descriva la nostra operation (Display name, operation name, HTTP verb=GET, Query Parameters=CODFIS) e clicchiamo sul pulsante <strong>Impelement Flow</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-20-56.png)\n\n11. Clicchiamo il pulsante <strong>+</strong> al centro del flusso per aggiungere la connessione al DB\n\n![Lab1](/docs/images/Lab1/Lab1-20-21-12.png)\n\n12. Ricerchiamo il connettore di tipo JDBC, verifichiamo che sia selezionata la connessione <strong>Account 1</strong> e clicchiamo sulla voce <strong>custom query</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-21-23.png)\n\n13. Inseriamo una semplice query che ci permetta di recuperare i dati dalle tabeelle sul db\n\n![Lab1](/docs/images/Lab1/Lab1-20-22-19.png)\n\n<code>\nselect * from NPT06801.RIGACONTRIBUTO as A, NPT06801.AZIENDA as B, where a.AziendaCodice =b.codiceAzienda and a.CF=\n</code>\n\n14. Clicchiamo sul pulsante sulla destra per ricercare ed associare il campo <strong>CODIFS</strong> alla query\n\n![Lab1](/docs/images/Lab1/Lab1-20-22-26.png)\n\n15. Clicchiamo sul pulante a destra per confermare l'inserimento\n\n![Lab1](/docs/images/Lab1/Lab1-20-22-43.png)\n\n16. Inseriamo un codice fiscale di esempio per verificare che la query sia stata correttamente inserita: (es codfis: RSSRST70A01F205X)\n\n![Lab1](/docs/images/Lab1/Lab1-20-23-03.png)\n\n17. Clicchiamo sul pulsante sulla destra per testare il componente (<strong>Try this action</strong>)\n\n![Lab1](/docs/images/Lab1/Lab1-20-23-10.png)\n\n18. Clicchiamo sul bottone <strong>Continua</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-23-19.png)\n\n19. Verifichiamo il risultato cliccando su <strong>View results</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-23-23.png)\n\n20. Si aprirà una finestra sulla destra che ci mostrerà i dati recuperati\n\n![Lab1](/docs/images/Lab1/Lab1-20-23-27.png)\n\n21. Cliccando sul tab output potremmo analizzare i dati recuperati\n\n![Lab1](/docs/images/Lab1/Lab1-20-23-30.png)\n\n22. Torniamo nella finestra principale e aggiungiamo un parsing dei dati json a valle del recupero dei dati cliccado sull'immagine <strong>+</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-24-00.png)\n\n23. Selezioniamo il tab <strong>toolbox</strong> e la voce <strong>JSON parser</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-24-04.png)\n\n24. Clicchiamo sul bottone a desta ed andiamo a selezionare la voce <strong>Data</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-00.png)\n\n25. In questo modo comparirà la voce di dettaglio con il JSON di esempio\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-11.png)\n\n26. Clicchiamo su <strong>Generata Schema</strong> per recuperare il formato dei dati\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-15.png)\n\n27. Nella parte in basso, verrà creato uno schema dati JSON a partire dai dati di esempio\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-23.png)\n\n28. Ritorniamo sul flusso principale e clicchiamo sull'ultimo blocco <strong>Response</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-30.png)\n\n29. Clicchiamo sull bottone a destra in corrispondenza della voce <strong>righe</strong> e selezioniamo la voce <strong>Parsed JSON</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-42.png)\n![Lab1](/docs/images/Lab1/Lab1-20-25-47.png)\n\n30. Associamo al campo <strong>progressivo</strong> il campo <strong>PROGRESSIVO</strong> recuperato dal JSON\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-54.png)\n\n31. Continuiamo l'associazione dei campi selezionando il campo <strong>dal</strong> \n\n![Lab1](/docs/images/Lab1/Lab1-20-26-11.png)\n\n32. Completiamo l'associazione per tutit gli altri campi (Tipo-contribuzione, tipo-contributo, diritto, calcolo, euro, lire, codice e descrizione) come indicato nell'immagine\n\n![Lab1](/docs/images/Lab1/Lab1-20-27-29.png)\n\n33. Clicchiamo sul bottone in alto <strong>Try this action</strong> per testare il flusso\n\n![Lab1](/docs/images/Lab1/Lab1-20-27-35.png)\n\n34. Clicchiamo su <strong>Continue</strong> nel messaggio di warning\n\n![Lab1](/docs/images/Lab1/Lab1-20-27-38.png)\n\n35. Verifichiamo che i dati siano stati effettivamente recuperati (200 OK) e clicchiamo sulla voce <strong>view results</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-27-41.png)\n\n36. Passiamo alla modalità <strong>Output</strong> e <strong> < / ></strong> per verificare il sorgente di output della risposta\n![Lab1](/docs/images/Lab1/Lab1-20-27-51.png)\n\n37. Chiudiamo il menù di output\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-08.png)\n\n38. Adniamo infine ad aggiungere nel flusso principale un ulteriore step cliccando sull'immagine <strong>+</strong>, prima della figura <strong>Response</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-14.png)\n\n39. Ricerchiamo il connettore <strong>Kafka</strong>, verifichiamo che l'account selezionato sia <strong>Account 1</strong> ed all'interno della voce <strong>Message</strong>, selezioniamo il campo <strong>Send message</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-27.png)\n\n40. Selezioniamo il topic Kafka su cui andare ad inviare il messaggio\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-33.png)\n\n41. Selezioniamo il topic <strong>WORKSHOP</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-38.png)\n\n42. Completiamo i campi in basso per associare la coppia chiave valore del messaggio, indicando come:\nClientID = DEVXXX (nome utente) e selsezioniamo il valore Key = OBject>CODIFIS\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-59-0.png)\n\n43. Aggiungiamo il prefisso DEVXX- con il proprio nome utente al valore <strong>key</strong>, in modo che ogni utente pubblicherà i messaggi con una chiave diversa.\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-59-1.png)\n\n44. Selezioiamo per la voece <strong>Payload</strong> il menù a destra> <strong>All messages</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-29-06.png)\n\n45. Associamo il campo <strong>jdbc>Data</strong> al campo <strong>Payload</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-29-54.png)\n\n46. Clicchiamo sul tasto in alto <strong>Try this flow</strong> per testare nuovamente il flusso\n\n![Lab1](/docs/images/Lab1/Lab1-20-30-20.png)\n\n47. Verifichiamo che la risposta sia 200 OK e andiamo a verificare che il messaggio sia stato scritto anche su Kafka cliccando sull'hamburger menù in alto a sinistra\n\n![Lab1](/docs/images/Lab1/Lab1-20-30-30-01.png)\n\n48. Navighiamo nel menù e clicchiamo la voce <strong>Amminstration>Integration Instances</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-30-48.png)\n\n49. Clicchiamo sulla voce <strong>event-streams</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-31-01.png)\n\n50. Clicchiamo sulla seconda icona del menù sulla sinistra <strong>topics</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-31-11.png)\n\n51. Clicchiamo sul topic <strong>WORKSHOP</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-31-14.png)\n\n52. Verifichiamo all'interno dei topic la presenza dei messaggi\n\n![Lab1](/docs/images/Lab1/Lab1-20-31-28.png)\n\n53. Analizziamo l'output del messaggio inserito\n\n![Lab1](/docs/images/Lab1/Lab1-20-31-35.png)\n\n![Lab1](/docs/images/Lab1/Lab1-20-32-07.png)\n","type":"Mdx","contentDigest":"b70ed3ac13861a9cd358ffcbba264b01","owner":"gatsby-plugin-mdx","counter":242},"frontmatter":{"title":"Lab 2 - Leggere i dati da un DB","description":"Creare un API per leggere i dati da un database attraverso un connettore JDBC"},"exports":{},"rawBody":"---\ntitle: Lab 2 - Leggere i dati da un DB\ndescription: Creare un API per leggere i dati da un database attraverso un connettore JDBC\n---\n\n# Creazione di un'API per accesso ad un Database\n\n<PageDescription>\n\nL'obiettivo del primo laboratorio è quello di creare un flusso di integrazione che esponga i dati di un DB attraverso un API. Il laboratorio è stato già predisposto, creando una connessione ad un Database DB2 di test.\n<br></br>\n\n</PageDescription>\n\n\n1. Colleghiamoci all'ambiente di laboratorio con utenza e password\n\n![IBM Design](docs/images/Lab1/Lab1-16-33-39.png)\n  \n2. Selezioniamo la voce <strong>ace-designer</strong> per accedere al menù di creazione dei flussi di integrazione\n\n![Lab1](/docs/images/Lab1/Lab1-16-33-54.png)\n\n3. Clicchiamo sulla voce <strong>Create a flow by describing and integration</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-14-03.png)\n\n4. Cerchiamo nella barra di ricerca, i modelli di integrazione relativi al workshop, digitando il tag <strong>INPS</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-14-16.png)\n\n5. Visualizziamo la voce <strong>View matching templates</strong> per visualizzare i template e apriamo la voce <strong>Righe Estratto Conto Template</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-18-07.png)\n\n6. Clicchiamo sul pulsante <strong>+</strong> sulla destra per creare il flusso (<strong>Create from asset</strong>)\n\n![Lab1](/docs/images/Lab1/Lab1-20-18-10.png)\n\n7. <strong>Importante!</strong> Rinominiamo il flusso in alto inserendo il nome del proprio utente (Dev xx)\n\n![Lab1](/docs/images/Lab1/Lab1-20-20-03.png)\n\n8. Andiamo a visualizzare le <strong>proprietà</strong> del modello dati\n\n![Lab1](/docs/images/Lab1/Lab1-20-20-07.png)\n\n9. Clicchiamo sul tab <strong>Operations</strong>><strong>Add a custom operation</strong> per creare una nuova azione\n\n![Lab1](/docs/images/Lab1/Lab1-20-20-13.png)\n\n10. Completiamo il riquadro che descriva la nostra operation (Display name, operation name, HTTP verb=GET, Query Parameters=CODFIS) e clicchiamo sul pulsante <strong>Impelement Flow</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-20-56.png)\n\n11. Clicchiamo il pulsante <strong>+</strong> al centro del flusso per aggiungere la connessione al DB\n\n![Lab1](/docs/images/Lab1/Lab1-20-21-12.png)\n\n12. Ricerchiamo il connettore di tipo JDBC, verifichiamo che sia selezionata la connessione <strong>Account 1</strong> e clicchiamo sulla voce <strong>custom query</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-21-23.png)\n\n13. Inseriamo una semplice query che ci permetta di recuperare i dati dalle tabeelle sul db\n\n![Lab1](/docs/images/Lab1/Lab1-20-22-19.png)\n\n<code>\nselect * from NPT06801.RIGACONTRIBUTO as A, NPT06801.AZIENDA as B, where a.AziendaCodice =b.codiceAzienda and a.CF=\n</code>\n\n14. Clicchiamo sul pulsante sulla destra per ricercare ed associare il campo <strong>CODIFS</strong> alla query\n\n![Lab1](/docs/images/Lab1/Lab1-20-22-26.png)\n\n15. Clicchiamo sul pulante a destra per confermare l'inserimento\n\n![Lab1](/docs/images/Lab1/Lab1-20-22-43.png)\n\n16. Inseriamo un codice fiscale di esempio per verificare che la query sia stata correttamente inserita: (es codfis: RSSRST70A01F205X)\n\n![Lab1](/docs/images/Lab1/Lab1-20-23-03.png)\n\n17. Clicchiamo sul pulsante sulla destra per testare il componente (<strong>Try this action</strong>)\n\n![Lab1](/docs/images/Lab1/Lab1-20-23-10.png)\n\n18. Clicchiamo sul bottone <strong>Continua</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-23-19.png)\n\n19. Verifichiamo il risultato cliccando su <strong>View results</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-23-23.png)\n\n20. Si aprirà una finestra sulla destra che ci mostrerà i dati recuperati\n\n![Lab1](/docs/images/Lab1/Lab1-20-23-27.png)\n\n21. Cliccando sul tab output potremmo analizzare i dati recuperati\n\n![Lab1](/docs/images/Lab1/Lab1-20-23-30.png)\n\n22. Torniamo nella finestra principale e aggiungiamo un parsing dei dati json a valle del recupero dei dati cliccado sull'immagine <strong>+</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-24-00.png)\n\n23. Selezioniamo il tab <strong>toolbox</strong> e la voce <strong>JSON parser</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-24-04.png)\n\n24. Clicchiamo sul bottone a desta ed andiamo a selezionare la voce <strong>Data</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-00.png)\n\n25. In questo modo comparirà la voce di dettaglio con il JSON di esempio\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-11.png)\n\n26. Clicchiamo su <strong>Generata Schema</strong> per recuperare il formato dei dati\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-15.png)\n\n27. Nella parte in basso, verrà creato uno schema dati JSON a partire dai dati di esempio\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-23.png)\n\n28. Ritorniamo sul flusso principale e clicchiamo sull'ultimo blocco <strong>Response</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-30.png)\n\n29. Clicchiamo sull bottone a destra in corrispondenza della voce <strong>righe</strong> e selezioniamo la voce <strong>Parsed JSON</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-42.png)\n![Lab1](/docs/images/Lab1/Lab1-20-25-47.png)\n\n30. Associamo al campo <strong>progressivo</strong> il campo <strong>PROGRESSIVO</strong> recuperato dal JSON\n\n![Lab1](/docs/images/Lab1/Lab1-20-25-54.png)\n\n31. Continuiamo l'associazione dei campi selezionando il campo <strong>dal</strong> \n\n![Lab1](/docs/images/Lab1/Lab1-20-26-11.png)\n\n32. Completiamo l'associazione per tutit gli altri campi (Tipo-contribuzione, tipo-contributo, diritto, calcolo, euro, lire, codice e descrizione) come indicato nell'immagine\n\n![Lab1](/docs/images/Lab1/Lab1-20-27-29.png)\n\n33. Clicchiamo sul bottone in alto <strong>Try this action</strong> per testare il flusso\n\n![Lab1](/docs/images/Lab1/Lab1-20-27-35.png)\n\n34. Clicchiamo su <strong>Continue</strong> nel messaggio di warning\n\n![Lab1](/docs/images/Lab1/Lab1-20-27-38.png)\n\n35. Verifichiamo che i dati siano stati effettivamente recuperati (200 OK) e clicchiamo sulla voce <strong>view results</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-27-41.png)\n\n36. Passiamo alla modalità <strong>Output</strong> e <strong> < / ></strong> per verificare il sorgente di output della risposta\n![Lab1](/docs/images/Lab1/Lab1-20-27-51.png)\n\n37. Chiudiamo il menù di output\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-08.png)\n\n38. Adniamo infine ad aggiungere nel flusso principale un ulteriore step cliccando sull'immagine <strong>+</strong>, prima della figura <strong>Response</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-14.png)\n\n39. Ricerchiamo il connettore <strong>Kafka</strong>, verifichiamo che l'account selezionato sia <strong>Account 1</strong> ed all'interno della voce <strong>Message</strong>, selezioniamo il campo <strong>Send message</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-27.png)\n\n40. Selezioniamo il topic Kafka su cui andare ad inviare il messaggio\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-33.png)\n\n41. Selezioniamo il topic <strong>WORKSHOP</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-38.png)\n\n42. Completiamo i campi in basso per associare la coppia chiave valore del messaggio, indicando come:\nClientID = DEVXXX (nome utente) e selsezioniamo il valore Key = OBject>CODIFIS\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-59-0.png)\n\n43. Aggiungiamo il prefisso DEVXX- con il proprio nome utente al valore <strong>key</strong>, in modo che ogni utente pubblicherà i messaggi con una chiave diversa.\n\n![Lab1](/docs/images/Lab1/Lab1-20-28-59-1.png)\n\n44. Selezioiamo per la voece <strong>Payload</strong> il menù a destra> <strong>All messages</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-29-06.png)\n\n45. Associamo il campo <strong>jdbc>Data</strong> al campo <strong>Payload</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-29-54.png)\n\n46. Clicchiamo sul tasto in alto <strong>Try this flow</strong> per testare nuovamente il flusso\n\n![Lab1](/docs/images/Lab1/Lab1-20-30-20.png)\n\n47. Verifichiamo che la risposta sia 200 OK e andiamo a verificare che il messaggio sia stato scritto anche su Kafka cliccando sull'hamburger menù in alto a sinistra\n\n![Lab1](/docs/images/Lab1/Lab1-20-30-30-01.png)\n\n48. Navighiamo nel menù e clicchiamo la voce <strong>Amminstration>Integration Instances</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-30-48.png)\n\n49. Clicchiamo sulla voce <strong>event-streams</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-31-01.png)\n\n50. Clicchiamo sulla seconda icona del menù sulla sinistra <strong>topics</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-31-11.png)\n\n51. Clicchiamo sul topic <strong>WORKSHOP</strong>\n\n![Lab1](/docs/images/Lab1/Lab1-20-31-14.png)\n\n52. Verifichiamo all'interno dei topic la presenza dei messaggi\n\n![Lab1](/docs/images/Lab1/Lab1-20-31-28.png)\n\n53. Analizziamo l'output del messaggio inserito\n\n![Lab1](/docs/images/Lab1/Lab1-20-31-35.png)\n\n![Lab1](/docs/images/Lab1/Lab1-20-32-07.png)\n","fileAbsolutePath":"/Users/luciano/GH-REPOS/workshop/src/pages/lab2/lab2.mdx"}}},
    "staticQueryHashes": ["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}